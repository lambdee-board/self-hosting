#!/usr/bin/env bash
set -e

REPO="https://raw.githubusercontent.com/lambdee-board/self-hosting"
DEFAULT_LAMBDEE_DIR="/opt/lambdee"
CLR_END=$'\e[0m'
CLR_BLUE=$'\e[0;34m'
CLR_GREEN=$'\e[0;32m'

prompt() {
  echo -n -e "$CLR_BLUE[?]$CLR_END $1: "
}

log() {
  echo "$CLR_GREEN[!]$CLR_END $1"
}

prompt "Enter the installation directory (leave empty for $DEFAULT_LAMBDEE_DIR)"
read LAMBDEE_DIR

if [ "$LAMBDEE_DIR" == "" ]; then
  LAMBDEE_DIR=$DEFAULT_LAMBDEE_DIR
fi

\curl -sSL $REPO/main/bin/prod/manage > $LAMBDEE_DIR/manage
$LAMBDEE_DIR/manage install
